<!--
    Rwanda Climate Alerts - Main Dashboard Template
    
    This is the main HTML template for the Rwanda Climate Alerts dashboard.
    It provides a responsive layout with:
    - Interactive map with risk layer overlays
    - Time series plot visualization
    - Monthly climate statistics cards
    
    Structure:
    1. Head: Meta tags, external dependencies (Bootstrap, Leaflet), custom styles
    2. Body: Container with map, plots, and statistics
    3. Scripts: JavaScript libraries and custom app logic
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rwanda Climate Alerts</title>
    
    <!-- Bootstrap CSS - Modern UI framework -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Leaflet CSS - Interactive map library -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Custom CSS - Application-specific styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">
</head>
<body>
    <div class="container-fluid">
        <h3 style="text-align: center; margin-bottom: 30px;">üåç Natural Disaster Dashboard</h3>

        <!-- First Row -->
        <div class="row">
            <!-- Left Column: Map -->
            <div class="col-md-6">
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header">Map Layers</div>
                    <div class="card-body">
                        <!-- Layer Checklist -->
                        <div id="layer-checklist" style="width: 100%; text-align: center; margin-bottom: 10px;">
                            <label><input type="checkbox" value="flood"> Flood Risk</label>
                            <label><input type="checkbox" value="drought"> Drought Risk</label>
                            <label><input type="checkbox" value="landslide"> Landslide Risk</label>
                            <label><input type="checkbox" value="districts" checked> District Boundaries</label>
                        </div>
                        
                        <!-- Map Container -->
                        <div id="map" style="width: 100%; height: 450px; margin-top: 10px; position: relative;"></div>
                        
                        <!-- Legend -->
                        <div style="position: absolute; bottom: 20px; left: 30px; background: rgba(255,255,255,0.85); 
                                    padding: 8px 16px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 1000;">
                            <div style="font-size: 16px;">
                                <span style="color: green; font-weight: bold;">0</span>
                                <span style="margin-left: 5px; color: green;"> (Low Risk)</span>
                                <span style="margin: 0 8px;"> | </span>
                                <span style="color: red; font-weight: bold;">1</span>
                                <span style="margin-left: 5px; color: red;"> (High Risk)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Plot -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">District Data</div>
                    <div class="card-body">
                        <h5 style="margin-bottom: 10px;">Select district</h5>

                        <!-- District Dropdown -->
                        <select id="district-dropdown" class="form-select" style="margin-bottom: 15px;">
                            {% for district in districts %}
                            <option value="{{ district }}">{{ district }}</option>
                            {% endfor %}
                        </select>

                        <!-- Dataset Dropdown -->
                        <select id="dataset-dropdown" class="form-select" style="margin-bottom: 15px;">
                            <option value="chirps">Rainfall</option>
                            <option value="era5_temp">Temperature</option>
                            <option value="soil_moist">Soil Moisture</option>
                            <option value="ndvi">Vegetation health</option>
                        </select>

                        <!-- Plot Image -->
                        <img id="risk-plot" src="" alt="Loading plot..."
                             style="width: 100%; margin-top: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    </div>
                </div>
            </div>
        </div>

        <!-- Second Row -->
        <div class="row">
            <!-- Monthly Data -->
            <!-- First Row: Select District -->
            <div class="col-12">
                <div class="card select-district-card" id="select-district-monthly">
                    <div class="card-header">Last Month's Data</div>
                    <div class="card-body">
                        <h5 style="margin-bottom: 10px;">Select district</h5>

                        <select id="district-dropdown-info" class="form-select" style="margin-bottom: 15px;">
                            {% for district in districts %}
                            <option value="{{ district }}">{{ district }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <!-- Second Row: Rainfall & Temperature -->
            <div class="col-12">
                <div class="row info-row">
                    <!-- Rainfall -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Rainfall</div>
                            <div class="card-body">
                                <h2 id="chirps" style="margin-bottom: 10px;">0 mm</h2>
                            </div>
                        </div>
                    </div>

                    <!-- Temperature -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Temperature</div>
                            <div class="card-body">
                                <h2 id="temp" style="margin-bottom: 10px;">0 ¬∞C</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Third Row: Soil Moisture & NDVI -->
                <div class="row info-row">
                    <!-- Soil Moisture -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Soil Moisture</div>
                            <div class="card-body">
                                <h2 id="soil_moist" style="margin-bottom: 10px;">0 %</h2>
                            </div>
                        </div>
                    </div>

                    <!-- NDVI -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">NDVI</div>
                            <div class="card-body">
                                <h2 id="ndvi" style="margin-bottom: 10px;">0</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Section - Copyright and attribution -->
        <footer style="text-align: center; margin-top: 40px; color: #888;">
            ¬© 2025 Rwanda Climate Alerts | Powered by Earth Engine & Flask
        </footer>
    </div>
    
    <!-- JavaScript Dependencies -->
    
    <!-- Leaflet JS - Interactive mapping library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Bootstrap JS - UI interactions and components -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript - Dashboard logic and API interactions -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
